import{a as s,j as t,n as T,T as w,G as d,B as u,S as I,o as F}from"./@mui-926ab118.js";import{r as l}from"./react-4cc0034d.js";import{a as h}from"./axios-1779699b.js";import"./clsx-0839fdbe.js";import"./react-transition-group-dd4db10c.js";import"./@babel-591e0485.js";import"./react-dom-502af1e5.js";import"./scheduler-765c72db.js";import"./@emotion-4d3fcc43.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./stylis-79144faa.js";const W=()=>{const[e,f]=l.useState({id:"",name:"",phone:"",emergencyContactName:"",emergencyContactNumber:"",height:"",weight:"",age:"",bloodGroup:"",email:"",address:""}),[m,g]=l.useState(null),[p,n]=l.useState(""),[b,i]=l.useState(!1),y=a=>{const{name:o,value:c}=a.target;f({...e,[o]:c})},x=()=>e.email.includes("@")?isNaN(e.phone)||e.phone.length<10?(n("Phone number must be at least 10 digits."),i(!0),!1):!e.id||!e.name||!e.address?(n("Please fill in all required fields."),i(!0),!1):!0:(n("Invalid email address."),i(!0),!1),N=async()=>{try{const a=await h.get("http://localhost:5000/capture-rtsp");g(`data:image/jpeg;base64,${a.data.image}`)}catch{n("Error capturing image from RTSP stream."),i(!0)}},v=()=>{g(null)},C=async a=>{if(a.preventDefault(),!!x())try{const o=await h.post("http://localhost:5000/new-registration",{...e,image:m});console.log("Form submitted successfully:",o.data),n("Registration successful!"),i(!1),setTimeout(()=>{n("")},2e3)}catch(o){console.error("Error submitting form:",o),n("Error submitting registration. Please try again."),i(!0)}},r=(a,o,c,S="text")=>t(F,{fullWidth:!0,label:a,name:o,value:c,onChange:y,variant:"outlined",margin:"normal",type:S,required:!0});return s("div",{className:"flex flex-row min-h-screen",children:[s("div",{className:"flex flex-col w-4/6 p-8",children:[s("div",{className:"flex flex-row items-center justify-center mb-4",children:[t(T,{sx:{fontSize:50,color:"#007FFF"}}),t(w,{variant:"h4",className:"font-bold ml-2",children:"New Registration Form"})]}),s("form",{onSubmit:C,children:[s(d,{container:!0,spacing:2,children:[s(d,{item:!0,xs:12,md:6,children:[r("ID","id",e.id),r("Phone","phone",e.phone,"tel"),r("Blood Group","bloodGroup",e.bloodGroup),r("Height","height",e.height,"number"),r("Email Address","email",e.email,"email")]}),s(d,{item:!0,xs:12,md:6,children:[r("Name","name",e.name),r("Address","address",e.address),r("Age","age",e.age,"number"),r("Weight","weight",e.weight,"number"),r("Emergency Contact Name","emergencyContactName",e.emergencyContactName),r("Emergency Contact Number","emergencyContactNumber",e.emergencyContactNumber,"tel")]})]}),t(u,{variant:"contained",color:"primary",onClick:N,style:{marginTop:"20px"},children:"Capture Image from RTSP Stream"}),m&&t(u,{variant:"contained",color:"secondary",onClick:v,style:{marginTop:"10px"},children:"Retake Image"}),m&&t("div",{style:{marginTop:"20px"},children:t("img",{src:m,alt:"Captured from RTSP",style:{width:"100%",height:"auto"}})}),t(u,{type:"submit",variant:"contained",color:"primary",startIcon:t(I,{}),style:{marginTop:"20px"},children:"Submit"})]})]}),p&&t("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800 bg-opacity-75 z-50",children:t("div",{className:`p-6 rounded-lg text-center ${b?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:t("p",{className:"text-lg font-bold mb-4",children:p})})})]})};export{W as default};
